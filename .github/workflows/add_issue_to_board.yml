name: new-issue-automation

on:
  issues:
    types: [opened]
    
env:
  BOARD_NAME: "Board"

jobs:
  move-new-issues-to-backlog:
    # We not want to move P0 issues to the backlog column
    if: "!contains(github.event.issue.labels.*.name, 'P0')"
    runs-on: ubuntu-latest
    steps:
      - uses: alex-page/github-project-automation-plus@v0.8.0
        with:
          project: ${{ env.BOARD_NAME }}
          column: "Backlog"
          # The normal GITHUB_TOKEN should have enough permission to edit the board. However, it seems so, 
          # that there is a GitHub bug. As a workaround we add an Personal GitHub Token (Nils Token)
          repo-token: ${{ secrets.PROJECT_AUTOMATION_PLUS_TOKEN }}
